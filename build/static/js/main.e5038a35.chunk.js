(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),c=t.n(r),l=(t(20),t(14)),o=t(2);var i=function(e){return u.a.createElement("div",null,"search by name:",u.a.createElement("input",{type:"text",value:e.value,onChange:e.handleChange}))};var s=function(e){return u.a.createElement("div",null,u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",null,"name: ",u.a.createElement("input",{type:"text",value:e.nameValue,onChange:e.handleNameChange})),u.a.createElement("div",null,"number: ",u.a.createElement("input",{type:"text",value:e.numberValue,onChange:e.handleNumberChange})),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add"))))};var m=function(e){return u.a.createElement("div",null,u.a.createElement("p",{style:{display:"inline"}},e.name," - ",e.number),u.a.createElement("button",{onClick:function(){return e.handleDelete(e.id)}},"delete"))};var d=function(e){return u.a.createElement("div",null,e.persons.map((function(n){return u.a.createElement("div",{key:n.id,style:{display:"inline"}},u.a.createElement(m,{key:n.name,id:n.id,name:n.name,number:n.number,handleDelete:e.handleDelete}))})))};t(21);var f=function(e){var n=e.type,t=e.message;return null===n?null:"error"===n?u.a.createElement("div",{className:"error"},t):"success"===n?u.a.createElement("div",{className:"success"},t):void 0},h=t(3),p=t.n(h),b="/api/persons",y=function(){return p.a.get(b).then((function(e){return e.data}))},g=function(e){return p.a.post(b,e).then((function(e){return e.data}))},v=function(e,n){return p.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},E=function(e){return p.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),m=Object(o.a)(c,2),h=m[0],p=m[1],b=Object(a.useState)(""),w=Object(o.a)(b,2),j=w[0],C=w[1],O=Object(a.useState)(""),k=Object(o.a)(O,2),N=k[0],S=k[1],D=Object(a.useState)({type:null,message:""}),T=Object(o.a)(D,2),x=T[0],V=T[1];Object(a.useEffect)((function(){y().then((function(e){return r(e)}))}),[]);var A=t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())}));return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook App"),u.a.createElement(f,{type:x.type,message:x.message}),u.a.createElement(i,{value:N,handleChange:function(e){S(e.target.value)}}),u.a.createElement("h2",null,"add a new person"),u.a.createElement(s,{handleSubmit:function(e){e.preventDefault();var n=t.filter((function(e){return e.name===h})).length;if(t.filter((function(e){return e.number===j})).length)V({type:"error",message:"This number already exists!"}),setTimeout((function(){V({type:null,message:""})}),3e3);else if(n){if(window.confirm("".concat(h," already has a number in phone book. Do you want to replace the old number with the new one?"))){var a=t.find((function(e){return e.name===h})),u=Object(l.a)({},a,{number:j});v(a.id,u).then((function(e){return r(t.map((function(n){return n.id!==a.id?n:e})))})).catch((function(e){V({type:"error",message:"An error occured when updating!"}),setTimeout((function(){V({type:null,message:""})}),3e3),r(t.filter((function(e){return e.id!==a.id})))})),V({type:"success",message:"Number updated!"}),setTimeout((function(){V({type:null,message:""})}),3e3),p(""),C("")}}else{g({name:h,number:j}).then((function(e){return r(t.concat(e))})),V({type:"success",message:"".concat(h," successfully added to the phonebook!")}),setTimeout((function(){V({type:null,message:""})}),3e3),p(""),C("")}},nameValue:h,handleNameChange:function(e){p(e.target.value)},numberValue:j,handleNumberChange:function(e){C(e.target.value)}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(d,{persons:A,handleDelete:function(e){window.confirm("Do you really want to delete this contact?")&&(E(e).then((function(n){return r(t.filter((function(n){return n.id!==e})))})).catch((function(e){V({type:"error",message:"An error occured when deleting contact"}),setTimeout((function(){V({type:null,message:""})}),3e3)})),V({type:"success",message:"Number successfully deleted!"}),setTimeout((function(){V({type:null,message:""})}),3e3),r(t.filter((function(n){return n.id!==e}))))}}))};c.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(w,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.e5038a35.chunk.js.map